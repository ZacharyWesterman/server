type Blob {
	id: String!
	created: DateTime!
	creator: String!
	name: String!
	ext: String!
	mimetype: String!
	size: Int!
	tags: [String!]!
	preview: String
}

type BlobDoesNotExistError {
	message: String!
}

type BadTagQuery {
	message: String!
}

type BlobList {
	blobs: [Blob!]!
}

type BlobCount {
	count: Int!
}

input BlobSearchFilter {
	creator: String
	begin_date: DateTime
	end_date: DateTime
	name: String
	tag_expr: String
}

union BlobCountResponse = BlobCount | BadTagQuery
union BlobQueryResponse = BlobList | BadTagQuery
union BlobUpdateResponse = Blob | BlobDoesNotExistError | InsufficientPerms

#Resolvers below this line:

extend type Query {
	getBlobs(filter: BlobSearchFilter!, start: Int!, count: Int!): BlobQueryResponse!
	countBlobs(filter: BlobSearchFilter!): BlobCountResponse!
	getBlob(id: String!): Blob
}

extend type Mutation {
	deleteBlob(id: String!): BlobUpdateResponse!
	setBlobTags(id: String!, tags: [String!]!): BlobUpdateResponse!
}