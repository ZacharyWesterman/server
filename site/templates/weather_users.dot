{{~it:user}}
	<div class="card highlight {{?user.exclude}}disabled{{?}}">
		<div class="card-inner">
			<div onclick="$.toggle_expand('card-{{=user.username}}')">
				<h4><b>{{=user.username}}</b>{{?user.exclude}}<i> (disabled)</i>{{?}}</h4>
				<p>Last sent at: {{=user.last_sent || 'Never'}}</p>
			</div>

			<div class="expand-container">
				<div id="card-{{=user.username}}" class="expand-contract">
					<table>
						<tr>
							<td></td>
							<td>Phone:</td>
							<td><input id="phone-{{=user.username}}" type="tel" value="{{=user.phone}}" *change="update_user('{{=user.username}}', this)" format="phone" required></td>
						</tr>
						<tr>
							<td></td>
							<td>Lat:</td>
							<td><input id="lat-{{=user.username}}" type="number" step="any" value="{{=user.lat}}" *change="update_user('{{=user.username}}', this)" format="number" required></td>
						</tr>
						<tr>
							<td></td>
							<td>Lon:</td>
							<td><input id="lon-{{=user.username}}" type="number" step="any" value="{{=user.lon}}" *change="update_user('{{=user.username}}', this)" format="number" required></td>
						</tr>
						<tr>
							<td>
								<input id="has-max-{{=user.username}}" type="checkbox" *click="$('max-{{=user.username}}').value = ''; $('max-{{=user.username}}').disabled = !this.checked; update_user('{{=user.username}}', this)" {{?!user.max.disable}}checked{{?}}>
							</td>
							<td>Max:</td>
							<td><input placeholder="default" id="max-{{=user.username}}" type="number" step="any" value="{{=(user.max.disable || user.max.default) ? '' : user.max.value}}" *change="update_user('{{=user.username}}', this)" format="number" {{?user.max.disable}}disabled{{?}}></td>
						</tr>
						<tr>
							<td>
								<input id="has-min-{{=user.username}}" type="checkbox" *click="$('min-{{=user.username}}').value = ''; $('min-{{=user.username}}').disabled = !this.checked; update_user('{{=user.username}}', this)" {{?!user.min.disable}}checked{{?}}>
							</td>
							<td>Min:</td>
							<td><input placeholder="default" id="min-{{=user.username}}" type="number" step="any" value="{{=(user.min.disable || user.min.default) ? '' : user.min.value}}" *change="update_user('{{=user.username}}', this)" format="number" {{?user.min.disable}}disabled{{?}}></td>
						</tr>
					</table>

					<br>
					{{?user.exclude}}
						<button *click="enable_user('{{=user.username}}', this)">Enable</button>
					{{??}}
						<button *click="disable_user('{{=user.username}}', this)">Disable</button>
					{{?}}
					<button *click="delete_user('{{=user.username}}', this)">Delete</button>
				</div>
			</div>
		</div>
	</div>
{{~}}
