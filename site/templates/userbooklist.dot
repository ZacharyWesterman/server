{{~ it.books : book}}
<div class="card" style="max-width: 700px;">
	<div class="card-inner">
		{{? it.is_admin || book.owner === api.username}}
		<div class="right">
			<button class="icon clickable" *click="confirm_unlink_book('{{=escape(book.title)}}', '{{=book.rfid}}')"><i class="fa-solid fa-trash fa-lg {{?book.owner !== api.username}}disabled{{?}}"></i></button><br>
			<button class="icon clickable" *click="share_book('{{= book.shared ? book.shareHistory[book.shareHistory.length - 1].name : ''}}', '{{=escape(book.title)}}', '{{=escape(book.subtitle)}}', '{{=escape(book.authors.join(', '))}}', '{{=book.id}}', '{{=book.owner}}')"><i class="fa-solid fa-handshake fa-lg"></i></button><br>
			{{?book.description || (environment.is_mobile && book.categories.length)}}<button class="icon clickable" onclick="$.toggle_expand('card-{{=book.id}}')"><i class="fa-solid fa-angles-down fa-lg"></i></button>{{?}}
		</div>
		{{?}}
		<span onclick="$.toggle_expand('card-{{=book.id}}')" class="clickable">
			<b>{{=book.title}}</b><br>
			{{?book.subtitle}}<i>{{=book.subtitle}}</i>{{?}}
			<div class="disabled">By {{=book.authors.join(', ')}}</div>
		</span>
		<table class="clickable" onclick="$.toggle_expand('card-{{=book.id}}')">
			<tr>
				{{?book.thumbnail}}<td><img src="{{=book.thumbnail}}" alt=""></td>{{?}}
				{{?book.categories.length && !environment.is_mobile}}
					<td><blockquote style="valign: top;">
						<b><u>Categories</u></b>
						{{~ book.categories : genre}}<br>{{=genre}}{{~}}
					</blockquote></td>
				{{?}}
			</tr>
		</table>
		<div class="expand-container clickable" id="card-{{=book.id}}" onclick="$.toggle_expand('card-{{=book.id}}')">
			<div>
				{{?book.categories.length && environment.is_mobile}}
					<blockquote style="valign: top;">
						<b><u>Categories</u></b>
						{{~ book.categories : genre}}<br>{{=genre}}{{~}}
					</blockquote>
				{{?}}
				{{?book.description}}{{=book.description.replace('\n', '<br>')}}{{?}}
			</div>
		</div>
		<br><div class="disabled">Physical copy owned by {{=book.owner}}</div>
		{{? book.shared }}<i class="error">Currently being borrowed by {{= book.shareHistory[book.shareHistory.length - 1].name }}</i>{{?}}
	</div>
</div>
{{~}}