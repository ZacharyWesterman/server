<div name="upload_modal"></div>

<div name="navbar"></div>

<div id="content" style="margin-left: 3rem;">
	<div name="blob_list"></div>
</div>

<script src="/js/date.js"></script>
<script src="/js/page/dashboard.js"></script>

<script>
async function get_blobs()
{
	return await api(`query ($start: Int!, $count: Int!){
		getAllBlobs(start: $start, count: $count) {
			id
			ext
			mimetype
			name
			creator
			created
		}
	}`, {
		start: 0,
		count: 20,
	})
}

window.reload_blobs = async function()
{
	var blobs = await get_blobs()
	for (var i in blobs)
	{
		blobs[i].created = date.output(blobs[i].created) //convert dates to local time
	}
	await _('blob_list', blobs)
}

reload_blobs()
</script>
